import { cli } from "../../../cli.js";
import { MemoryLogger } from "../utils/logger.js";
export function testCli() {
    return function ({ argorder, args, params }) {
        return function (argv, { columns = 80 } = {}) {
            let lastExitCode;
            const exit = (code) => { lastExitCode = code; };
            const logger = new MemoryLogger();
            const cliopts = { logger, exit };
            const command = cli(cliopts)({
                program: "test",
                readme: "https://github.com/benevolent-games/argv",
                help: "test cli program",
                argv,
                columns,
                argorder,
                args,
                params,
            });
            return {
                logger,
                command,
                get exitCode() { return lastExitCode; },
            };
        };
    };
}
//# sourceMappingURL=test-cli.js.map